!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ExpandableTree=t():e.ExpandableTree=t()}(self,(()=>(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>y});const n=require("react");var i=e.n(n);const s=require("prop-types");var a=e.n(s);const r=require("lodash/isNil");var l=e.n(r);const o=require("lodash/isEmpty");var d=e.n(o);const h=require("lodash/isEqual");var c=e.n(h);const p=require("lodash/find");var u=e.n(p);const C=require("lodash/get");var g=e.n(C);const b=require("lodash/cloneDeep");var m=e.n(b);const k=require("react-transition-group");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E.apply(this,arguments)}class f extends n.Component{constructor(e){super(e),this.state={data:m()(this.props.data),lastCheckToggledNodeIndex:null},f.checkedCount=this.props.folder?1:0,this.handleUpdate=this.handleUpdate.bind(this),this.printNodes=this.printNodes.bind(this),this.printChildren=this.printChildren.bind(this),this.printCheckbox=this.printCheckbox.bind(this),this.printDeleteButton=this.printDeleteButton.bind(this),this.printExpandButton=this.printExpandButton.bind(this),this.printNoChildrenMessage=this.printNoChildrenMessage.bind(this),this.handleCheckToggle=this.handleCheckToggle.bind(this),this.handleDelete=this.handleDelete.bind(this),this.handleExpandToggle=this.handleExpandToggle.bind(this)}static lastCheckNode=null;static checkedCount=0;componentWillReceiveProps(e){c()(e.data,this.props.data)||this.setState({data:m()(e.data)})}handleUpdate(e){const{depth:t,onUpdateCb:n}=this.props;n(e,t)}handleCheckToggle(e,t){const{onCheckToggleCb:n,depth:i,isOneCheck:s,folder:a}=this.props,{lastCheckToggledNodeIndex:r}=this.state,o=m()(this.state.data),d=u()(o,e),h=o.indexOf(d);if(s)if(l()(f.lastCheckNode))if(d.name===a)f.lastCheckNode=null,f.checkedCount=t.target.checked?1:0;else{if(0!==f.checkedCount)return;f.lastCheckNode=d,f.checkedCount=1}else if(d.name===f.lastCheckNode.name)f.lastCheckNode=null,f.checkedCount=t.target.checked?1:0;else{if(0!==f.checkedCount)return;f.lastCheckNode=d,f.checkedCount=1}const c=[];if(t.shiftKey&&!l()(r)){const e=Math.min(h,r),n=Math.max(h,r);o.slice(e,n+1).forEach((e=>{e.isChecked=t.target.checked,c.push(e)}))}else d.isChecked=t.target.checked,c.push(d);n(c,i),this.setState({lastCheckToggledNodeIndex:h}),this.handleUpdate(o)}handleDelete(e){const{onDeleteCb:t,depth:n}=this.props,i=m()(this.state.data).filter((t=>!c()(e,t)));t(e,i,n)&&this.handleUpdate(i)}handleExpandToggle(e){const{onExpandToggleCb:t,depth:n}=this.props,i=m()(this.state.data),s=u()(i,e);s.isExpanded=!s.isExpanded,t(s,n),this.handleUpdate(i)}printCheckbox(e){const{isCheckable:t,isExpandable:n,keywordLabel:s,depth:a}=this.props;return t(e,a)?i().createElement("div",{className:"checkbox"},i().createElement("label",{className:"super-treeview-text"},i().createElement("input",{type:"checkbox",name:e[s],onChange:t=>{this.handleCheckToggle(e,t)},checked:!!e.isChecked,id:e.id}),i().createElement("i",{className:"input-helper"}),i().createElement("span",{className:n(e,a)?"font-bold":null,onClick:()=>{this.handleExpandToggle(e)}},e[s]))):i().createElement("label",{className:"super-treeview-text"},i().createElement("i",{className:"input-helper"}),i().createElement("span",{className:n(e,a)?"font-bold":null,onClick:()=>{this.handleExpandToggle(e)}},e[s]))}printDeleteButton(e){const{isDeletable:t,depth:n,deleteElement:s}=this.props;if(t(e,n))return i().createElement("div",{className:"delete-btn",onClick:()=>{this.handleDelete(e)}},s)}printExpandButton(e){const t=e.isExpanded?"super-treeview-triangle-btn-down":"super-treeview-triangle-btn-right",{isExpandable:n,depth:s}=this.props;return n(e,s)?i().createElement("div",{className:`super-treeview-triangle-btn ${t}`,onClick:()=>{this.handleExpandToggle(e)}}):i().createElement("div",{className:"super-treeview-triangle-btn super-treeview-triangle-btn-none"})}printNoChildrenMessage(){const{transitionExitTimeout:e,noChildrenAvailableMessage:t}=this.props,n={classNames:"super-treeview-no-children-transition",key:"super-treeview-no-children",style:{transitionDuration:`${e}ms`,transitionDelay:`${e}ms`},timeout:{enter:e},exit:!1};return i().createElement(k.CSSTransition,n,i().createElement("div",{className:"super-treeview-no-children"},i().createElement("div",{className:"super-treeview-no-children-content"},t)))}printNodes(e){const{keywordKey:t,keywordLabel:n,depth:s,transitionEnterTimeout:a,transitionExitTimeout:r,getStyleClassCb:l,isExpandable:o}=this.props,{printExpandButton:h,printCheckbox:c,printDeleteButton:p,printChildren:u}=this,C={classNames:"super-treeview-node-transition",style:{transitionDuration:`${a}ms`},timeout:{enter:a,exit:r}};return i().createElement(k.TransitionGroup,null,d()(e)&&o(e,s)?this.printNoChildrenMessage():e.map(((e,t)=>{g()(e,n,"");const a="function"==typeof e.getStyleClassCb?e.getStyleClassCb():"";return i().createElement(k.CSSTransition,E({},C,{key:e.id||t}),i().createElement("div",{className:`super-treeview-node ${a}`},i().createElement("div",{className:"super-treeview-node-content"},h(e,s),c(e,s),p(e,s)),u(e)))})))}printChildren(e){if(!e.isExpanded)return null;const{keywordChildren:t,keywordChildrenLoading:n,depth:s}=this.props;let a;return a=g()(e,n,!1)?g()(this.props,"loadingElement"):i().createElement(f,E({},this.props,{data:e[t]||[],depth:s+1,onUpdateCb:function(n){const i=m()(this.state.data);u()(i,e)[t]=n,this.handleUpdate(i)}.bind(this)})),i().createElement("div",{className:"super-treeview-children-container"},a)}render(){return i().createElement("div",{className:"super-treeview"},this.printNodes(this.state.data))}}f.propTypes={data:a().array.isRequired,depth:a().number,isOneCheck:a().bool,folder:a().string,deleteElement:a().element,getStyleClassCb:a().func,isCheckable:a().func,isDeletable:a().func,isExpandable:a().func,keywordChildren:a().string,keywordChildrenLoading:a().string,keywordKey:a().string,keywordLabel:a().string,loadingElement:a().element,noChildrenAvailableMessage:a().string,onCheckToggleCb:a().func,onDeleteCb:a().func,onExpandToggleCb:a().func,onUpdateCb:a().func,transitionEnterTimeout:a().number,transitionExitTimeout:a().number},f.defaultProps={depth:0,isOneCheck:!1,folder:"",deleteElement:i().createElement("div",null,"(X)"),getStyleClassCb:()=>"",isCheckable:()=>!0,isDeletable:()=>!0,isExpandable:()=>!0,keywordChildren:"children",keywordChildrenLoading:"isChildrenLoading",keywordLabel:"name",keywordKey:"id",loadingElement:i().createElement("div",null,"loading..."),noChildrenAvailableMessage:"No data found",onCheckToggleCb:()=>{},onDeleteCb:()=>!0,onExpandToggleCb:()=>{},onUpdateCb:()=>{},transitionEnterTimeout:1200,transitionExitTimeout:1200};const y=f;return t})()));